{% load static %}
<!DOCTYPE html>
<!--[if lt IE 8 ]><html class="no-js ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="no-js ie ie8" lang="en"> <![endif]-->
<!--[if IE 9 ]><html class="no-js ie ie9" lang="en"> <![endif]-->
<!--[if (gte IE 8)|!(IE)]><!--><html class="no-js" lang="en"> <!--<![endif]-->
<head>

   <!--- Basic Page Needs
   ================================================== -->
   <meta charset="utf-8">
	<title>Register</title>
	<meta name="description" content="">  
	<meta name="author" content="">
   <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
   <meta http-equiv="Pragma" content="no-cache">
   <meta http-equiv="Expires" content="0">

   <!-- Mobile Specific Metas
   ================================================== -->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<!-- CSS
    ================================================== -->
   <link rel="stylesheet" href="{% static 'css/default.css' %}">
	<link rel="stylesheet" href="{% static 'css/layout.css' %}">
   <link rel="stylesheet" href="{% static 'css/media-queries.css' %}">
   <link rel="stylesheet" href="{% static 'css/animate.css' %}">
   <link rel="stylesheet" href="{% static 'css/prettyPhoto.css' %}">

   <!-- Script
   ================================================== -->
	<script src="{% static 'js/modernizr.js' %}"></script>
   <script src="{% static 'js/main.js' %}"></script>

   <!-- Favicons
	================================================== -->
	<link rel="shortcut icon" href="{% static 'favicon.png' %}" >

</head>

<body>

   <div id="preloader">      
      <div id="status">
         <img src="{% static 'images/preloader.gif' %}" height="64" width="64" alt="">
      </div>
   </div>

   <!-- Header
   ================================================== -->
   <header>

      <div class="logo">
         <a class="smoothscroll" href="#hero"><img alt="" src="{% static 'images/logo.png' %}"></a>
      </div>

   </header> <!-- Header End -->
   <br><br>
   <section>
      <div class="container">
          {% if messages %}
          <div class="messages">
              {% for message in messages %}
              <div class="alert {% if message.tags %}alert-{{ message.tags }}{% endif %}">
                  {{ message }}
              </div>
              {% endfor %}
          </div>
          {% endif %}

          <h2 class="form-header">Registro</h2>
          
          <form id="registrationForm" method="post" action="">
              {% csrf_token %}
              
              <div class="form-group">
                  <label for="name">Nombre:</label>
                  {{ form.name }}
                  <div id="nameError" class="error-message"></div>
              </div>
              
              <div class="form-group">
                  <label for="last-name">Apellidos:</label>
                  {{ form.last_name }}
                  <div id="lastNameError" class="error-message"></div>
              </div>
              
              <!--<div class="form-group">
                  <label for="date-of-birth">Fecha de nacimiento:</label>
                  {{ form.date_of_birth }}
                  <div id="dobError" class="error-message"></div>
              </div>-->
              
              <div class="form-group">
                  <label for="email">Correo electrónico:</label>
                  {{ form.email }}
                  <div id="emailError" class="error-message"></div>
              </div>
              

              <div class="form-group">
                  <label for="phone">Número de teléfono:</label>
                  {{ form.phone_number }}
                  <div id="phoneError" class="error-message"></div>
              </div>

              <div class="form-group">
               <label for="region">Región:</label>
               {{ form.region }}
               <div id="regionError" class="error-message"></div>
               </div>
              
              <button type="submit" class="submit-btn">
                  Registrarse
              </button>
          </form>
      </div>
  </section>

   <!-- Footer
   ================================================== -->
   <footer>

      <div class="row">         

         <div class="six columns info">

            <div class="footer-logo">
               <a href="#">
                  <img src="{% static 'images/footer-logo.png' %}" alt="" />
               </a>
            </div>

            <p>REGISTRATEPR  es una plataforma digital diseñada para simplificar el proceso de registro en cualquier tipo de evento.</p>


         </div>



               <div class="columns last">
                  <h3 class="contact">Contáctanos</h3>
                  <ul>                   
                    <li><a href="mailto:someone@woo.com">registratepr.info@gmail.com</a></li>
                  </ul>
               </div>


         <p class="copyright">&copy; 2024 registratepr | Design by <a title="Styleshout" href="http://www.styleshout.com/">Styleshout</a></p>

<!--==================================================================-->
         <!--commented button to go back to top-->
         <!--<div id="go-top">
            <a class="smoothscroll" title="Back to Top" href="#hero"><i class="icon-up-open"></i></a>
         </div>-->

      </div> <!-- Row End -->

   </footer> <!-- Footer End-->


   <!-- Java Script
   ================================================== -->
   <script src="{% static 'http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js' %}"></script>
   <script>
    window.jQuery || document.write('<script src="{% static "js/jquery-1.10.2.min.js" %}"><\/script>');
</script>
   <script type="text/javascript" src="{% static 'js/jquery-migrate-1.2.1.min.js' %}"></script>
   <script src="{% static 'js/jquery.flexslider.js' %}"></script>
   <script src="{% static 'js/waypoints.js' %}"></script>
   <script src="{% static 'js/jquery.fittext.js' %}"></script>
   <script src="{% static 'js/jquery.fitvids.js' %}"></script>
   <script src="{% static 'js/imagelightbox.js' %}"></script>
   <script src="{% static 'js/jquery.prettyPhoto.js' %}"></script>   
   <script src="{% static 'js/main.js' %}"></script>
   <script>
        const form = document.querySelector('form');
        let isSubmitting = false;

        form.addEventListener('submit', function(e) {
            if (isSubmitting) {
            e.preventDefault();
            return;
            }

            isSubmitting = true;
            const submitButton = this.querySelector('button[type="submit"]');
            if (submitButton) {
            submitButton.disabled = true;
            submitButton.innerHTML = 'Procesando...';
            }
        });

        // Reset submission status when leaving the page
        window.addEventListener('beforeunload', function() {
            isSubmitting = false;
        });

        // Prevent form resubmission on page refresh
        if (window.history.replaceState) {
            window.history.replaceState(null, null, window.location.href);
        }

        // Reset the form and date picker after successful submission
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.querySelector('form');
            const messages = document.querySelector('.messages');
            
            // Reset form on any server response (success or error)
            if (messages && (messages.querySelector('.alert-success') || messages.querySelector('.alert'))) {
            form.reset();  // Reset all form fields
            const datePicker = document.getElementById('date-of-birth');
            if (datePicker) {
                    datePicker.value = '';  // Explicitly clear the date picker
            }
            
            // Clear any error messages that might be displayed
            const errorMessages = document.querySelectorAll('.error-message');
            errorMessages.forEach(error => error.textContent = '');
            }
            
            // Clear all inputs on page load
            const clearInputs = () => {
            const inputs = document.querySelectorAll('textarea, input[type="text"], input[type="email"], input[type="number"], input[type="date"]');
            inputs.forEach(input => input.value = '');
            };
            clearInputs();
        });    
   </script>

</body>

</html>